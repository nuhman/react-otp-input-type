import e,{useState as o,useEffect as t}from"react";function r(e,o){void 0===o&&(o={});var t=o.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===t&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}r("#word-input-container{width:-moz-fit-content;width:fit-content}");r(".form-control{border:1.5px solid #d3d3d3;border-radius:10px;height:32px;margin:4px;text-align:center;-webkit-transition:none;transition:none;width:32px}.form-control:focus,.form-control:focus-visible{box-shadow:0 0 5pt .5pt #d3d3d3;outline:none}.form-control.form-control-solid{background-color:#f3f6f9;border-color:#f3f6f9;color:#3f4254;transition:color .15s ease,background-color .15s ease,border-color .15s ease,box-shadow .15s ease}.form-control.form-control-solid.active,.form-control.form-control-solid.focus,.form-control.form-control-solid:active,.form-control.form-control-solid:focus{box-shadow:0 0 5pt .5pt #d3d3d3;outline:none}.form-error{border-color:#e74c3c;box-shadow:0 0 5pt .5pt #e74c3c;transition:color .15s ease,background-color .15s ease,border-color .15s ease,box-shadow .15s ease}.form-error.active,.form-error.focus,.form-error:active,.form-error:focus{box-shadow:0 0 5pt .5pt #d3d3d3;outline:none}");const n=({index:o,type:t,isDisabled:r,minLength:n,maxLength:l,inputRef:s,value:a,placeholder:c,hasError:i,handleInputFocus:d,handleInputValue:f,handlekeyDown:h,handleOnPaste:p,styleObject:u})=>{const m="object"==typeof u;return e.createElement("input",{className:"form-control "+(i?"form-error":"form-control-solid"),disabled:r,type:t,minLength:n,maxLength:l,ref:s,value:a,placeholder:c,onFocus:d,style:m?u:void 0,onChange:e=>f(e,o),onKeyDown:e=>h(e,o),onPaste:e=>p(e,o)})},l=({numOfInputs:r=4,isOnlyNumberAllowed:l=!1,isDisabled:s=!1,maskInput:a=!1,hasError:c=!1,value:i="",handleChange:d=(e=>e),placeholder:f="",styleObject:h})=>{const p=r,u=a?"password":l?"tel":"text",m="string"==typeof i?i.split("").slice(0,p):[],y="string"==typeof f?f.split("").slice(0,p):[],[g,b]=o(Array.from({length:p},((e,o)=>!m.length||o>m.length-1?"":m[o]))),[x]=o(Array.from({length:p},((e,o)=>!y.length||o>y.length-1?"":y[o]))),[w]=o(Array.from({length:p},(()=>e.createRef())));t((()=>{Array.isArray(g)&&d(g.join(""))}),[g,d]);const[k]=o(l?/^[0-9]+$/:/^.+$/),v=e=>{if(!(e>=p-1||e<-1))return w[e+1].current.focus()},A=e=>{if(!(e<=0))return w[e-1].current.focus()},C=(e,o)=>{const t=e?.target?.value;k.test(t)&&(b([...g.slice(0,o),t,...g.slice(o+1)]),v(o))},D=(e,o)=>{if(8===e.keyCode||"Backspace"===e.key||46===e.keyCode||"Delete"===e.key){const e=g[o];b([...g.slice(0,o),"",...g.slice(o+1)]),e||A(o)}else 37===e.keyCode||"ArrowLeft"===e.key?A(o):39!==e.keyCode&&"ArrowRight"!==e.key||v(o)},E=(e,o)=>{e.preventDefault();const t=(e?.clipboardData?.getData("text/plain")||"").slice(0,p-o).split(""),r=o+t.length>=p;b(r?[...g.slice(0,o),...t].slice(0,p):[...g.slice(0,o),...t,...g.slice(t.length+1)].slice(0,p)),v(o+t.length-2)},L=e=>e.target.select();return e.createElement("div",{id:"word-input-container"},Array.from({length:p},((o,t)=>e.createElement(n,{type:u,key:`otp-single-input-${t}`,index:t,minLength:1,maxLength:1,inputRef:w[t],value:g[t],handleInputFocus:L,handleInputValue:C,handlekeyDown:D,handleOnPaste:E,placeholder:x[t],isDisabled:s,hasError:c,styleObject:h}))))};export{l as OTPInputField};
